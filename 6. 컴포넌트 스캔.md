>- 컴포넌트 스캔과 의존관계 자동 주입 시작.

---

   - 지금까지 스프링 빈을 등록할 때 자바 코드의 @Bean이나 XML의 <bean>등을 통해 설정 정보에
     직접 등록할 스프링 빈을 나열했었음.
   - 등록해야 할 스프링 빈이 수십, 수백개가 되면 일일이 등록하기 귀찮고, 설정 정보도 커지고,
     누락하는 문제가 발생할 수 있다.
   - 그래서 스프링은 설정 정보가 없어서 자동으로 스프링 빈을 등록하는 컴포넌트 스캔이라는 기능을 제공함.
   - 또 의존관계도 자동으로 주입해주는 @Autowired라는 기능도 제공한다.

>- AutoAppConfig.java 생성   

  ![1](https://user-images.githubusercontent.com/102012155/174474898-1d711431-8501-42ea-a4d2-403cd37295f1.JPG)
   
   - 참고로 컴포넌트 스캔을 사용하면 @Configuration이 붙은 설정 정보도 자동으로 등록되기 때문에,
      AppConfig, TestConfig 등 앞에서 만들어두었던 설정 정보도 함께 등록되고, 실행 된다.
      그래서 excludeFilters를 이용해서 설정정보는 컴포넌트 스캔 대상에서 제외했음.
      보통 설정정보를 컴포넌트 스캔 대상에서 제외하지는 않지만, 기존 예제코드를 남기고 유지하기 위해 이렇게 함.
     - 컴포넌트 스캔은 이름 그대로 @Component 애노테이션이 붙은 클래스를 스캔해서 스프링 빈으로 등록한다. @Component를 붙여주면 됨!
     - 참고로 @Configuration이 컴포넌트 스캔의 대상이 된 이유도 @Configuration 소스 코드에
      @Component 애노테이션이 붙어 있기 때문이였다!
   
>- 각 클래스가 컴포넌트 스캔 대상이 되도록 @Conponent 애노테이션 붙여주기.
   
---
   
>- MemoryMemberRepository에 @Component 추가

   ![2](https://user-images.githubusercontent.com/102012155/174474906-43920573-16b9-4981-92eb-8a34076c368a.JPG)

>- RateDiscountPolicy에 @Component 추가

   ![3](https://user-images.githubusercontent.com/102012155/174474983-3e9bcaeb-c4d2-4468-9940-4358f2b0e54d.JPG)

>- MemberService에 @Component, @Autowired추가 

   ![4](https://user-images.githubusercontent.com/102012155/174474987-2458df58-37cf-44ae-9373-bbc9b6b4f968.JPG)

- 이전 AppConfig에서는 @Bean으로 직접 설정 정보를 작성했고, 의존관계도 직접 명시함.
이제는 이런 설정 정보 자체가 없어서 의존관계 주입도 이 클래스 안에서 해결을 해야함.
- @Autowired는 의존관계를 자동으로 주입해준다! 

>- OrderServiceImpl에 @Component, @Autowired 추가

   ![5](https://user-images.githubusercontent.com/102012155/174475003-ca04bc80-bd1b-4751-96ea-9d59ceaafda3.JPG)

- 참고로 @Autowired를 사용하면 생성자에 여러 의존관계도 한번에 주입받을 수 있음.

>- AutoAppConfigTest.java 생성

   ![6](https://user-images.githubusercontent.com/102012155/174475012-ca9d1a5b-f42b-4506-bfdd-4aa4e3ad54c5.JPG)

- AnnotationConfigApplicationContext를 사용하는 것은 기존과 동일!
- 설정 정보로 AutoAppConfig 클래스를 넘겨준다.
- 실행해 보면 기존과 같이 잘 동작한다!

>- 로그를 확인해보면 컴포넌트 스캔이 잘 동작하는 것을 확인 가능!

   ![7](https://user-images.githubusercontent.com/102012155/174475019-7efe9c91-4dcb-4707-9df2-386ce72bc886.JPG)

>- 컴포넌트 스캔과 자동 의존관계 주입이 어떻게 동작하는지 그림으로 확인!

>- @ComponentScan

   ![8](https://user-images.githubusercontent.com/102012155/174475028-fe5bcb79-8ea8-4288-bebb-d5eabd60e76d.JPG)

- @ComponentScan은 @Component가 붙은 모든 클래스를 스프링 빈으로 등록함.
 - 이때 스프링 빈의 기본 이름은 클래스명을 사용하는데 맨 앞글잠나 소문자로 바꿔 사용함.
   - 빈 이름 기본 전략: MemberServiceImpl 클래스 -> memberServiceImpl 로 사용
   - 빈 이름 직접 지정: 스프링 빈의 이름을 직접 지정하고 싶으면 @Component("")사용하면 됨.

>- @Autowired 의존관계 자동 주입

   ![9](https://user-images.githubusercontent.com/102012155/174475034-5661b772-f62a-413b-87ac-aedf265c850f.JPG)

   - 생성자에 @Autowired를 지정하면, 스프링 컨테이너가 자동으로 해당 스프링 빈을 찾아 주입한다.
   - 이때 기본 조회 전략은 타입이 같은 빈을 찾아 주입함.
      - getBean(MemberRepository.class)와 동일하다고 이해하면 됨.

   ![10](https://user-images.githubusercontent.com/102012155/174475044-f3a16733-83cb-4206-992a-7883733ed60b.JPG)

- 생성자에 파라미터가 많아도 다 찾아서 자동으로 주입해준다!!!
